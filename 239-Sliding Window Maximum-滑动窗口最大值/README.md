本题是一道单调队列的典型题。其主要思路在于：

- 入队的时候，考虑一个可以去除更小值的过程，**即如果前面的元素A比进队的元素B小，则只有A存在，则B就存在，且其最大值始终为B，所以此时入队时可以将B之前比B小的元素全部去除（这里就需要双端队列了）**。
- 而出队的时候，考虑到前面已经去除过多余的元素，所以此时想要出队的元素可能不存在队列中，所以此时判断如果出队的元素等于队尾元素，则将其去除，否则什么都不做。